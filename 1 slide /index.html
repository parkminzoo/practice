<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>slide 1</title>
</head>
<body>
    <div class="slide_wrapper">
        <ul class="slides">
            <li><img src="https://blogfiles.pstatic.net/MjAyMjA3MTRfMTA1/MDAxNjU3NzU0OTg4MTI4.lRCx65GMSEzrWUZxXeX6hkZV65yu3F6pdVPkAFZqbk0g.Wkc5fpKt9HxWJ0NAepaEiwrtgbrP2UIbmJtQ157Kdagg.GIF.beehoyoung/vllo.gif" alt=""></li>
            <li><img src="https://postfiles.pstatic.net/MjAyMjA3MTRfOTQg/MDAxNjU3NzU1NTA5NDYx.PtKtAyP2YDpAdWa45EJNsaUwAtr2zxslxlg9MOPGofMg.FZYYGULPA2VX7MeLJgpHvqfS2zalRNtweienlF0I29kg.GIF.beehoyoung/vllo.gif?type=w966" alt=""></li>
            <li><img src="https://postfiles.pstatic.net/MjAyMjA3MTRfOTQg/MDAxNjU3NzU1NTA5NDYx.PtKtAyP2YDpAdWa45EJNsaUwAtr2zxslxlg9MOPGofMg.FZYYGULPA2VX7MeLJgpHvqfS2zalRNtweienlF0I29kg.GIF.beehoyoung/vllo.gif?type=w966" alt=""></li>
            <li><img src="https://postfiles.pstatic.net/MjAyMjA3MTRfOTQg/MDAxNjU3NzU1NTA5NDYx.PtKtAyP2YDpAdWa45EJNsaUwAtr2zxslxlg9MOPGofMg.FZYYGULPA2VX7MeLJgpHvqfS2zalRNtweienlF0I29kg.GIF.beehoyoung/vllo.gif?type=w966" alt=""></li>
            <li><img src="https://postfiles.pstatic.net/MjAyMjA3MTRfOTQg/MDAxNjU3NzU1NTA5NDYx.PtKtAyP2YDpAdWa45EJNsaUwAtr2zxslxlg9MOPGofMg.FZYYGULPA2VX7MeLJgpHvqfS2zalRNtweienlF0I29kg.GIF.beehoyoung/vllo.gif?type=w966" alt=""></li>
            <li><img src="https://postfiles.pstatic.net/MjAyMjA3MTRfOTQg/MDAxNjU3NzU1NTA5NDYx.PtKtAyP2YDpAdWa45EJNsaUwAtr2zxslxlg9MOPGofMg.FZYYGULPA2VX7MeLJgpHvqfS2zalRNtweienlF0I29kg.GIF.beehoyoung/vllo.gif?type=w966" alt=""></li>
            <li><img src="https://postfiles.pstatic.net/MjAyMjA3MTRfOTQg/MDAxNjU3NzU1NTA5NDYx.PtKtAyP2YDpAdWa45EJNsaUwAtr2zxslxlg9MOPGofMg.FZYYGULPA2VX7MeLJgpHvqfS2zalRNtweienlF0I29kg.GIF.beehoyoung/vllo.gif?type=w966" alt=""></li>
            <li><img src="https://blogfiles.pstatic.net/MjAyMjA3MTRfMjAy/MDAxNjU3NzU1NTcxNzcw.JVN1QiAumIvG9hE7sI9tOtGhEtl3KiE6eIYbTvSo498g.n-FnOv0JltrMjsscYO0y7xsK5Rq0Tz_BsDxylL-fZ0sg.GIF.beehoyoung/vllo.gif" alt=""></li>
        </ul><!--.slides-->
        <p class="controls">
          <span class="prev">&lang;</span>
          <span class="next">&rang;</span>
      </p>
    </div><!--.slider_wrapper-->


</body>
<script>
    var slides = document.querySelector('.slides'),//단일요소로 가져옴
        slide = document.querySelectorAll('.slides li'),//수동으로 크기를 줬지만,갯수계산하여 배열을 사용하기위해
        currentIdx = 0,//시작하자마자 0을 보여주기위해
        slideCount = slide.length, //슬라이드 갯수 계산
        slideWidth = 300,//한개 슬라이드 넓이
        slideMargin = 100,//슬라이드간 마진값
        prevBtn = document.querySelector('.prev'),
        nextBtn = document.querySelector('.next');
        makeClone(); // 처음이미지와 마지막 이미지 복사 함수
        initfunction(); //슬라이드 넓이와 위치값 초기화 함수

function makeClone() {
  let cloneSlide_first = slide[0].cloneNode(true);
  let cloneSlide_last = slides.lastElementChild.cloneNode(true);
  slides.append(cloneSlide_first);
  slides.insertBefore(cloneSlide_last, slides.firstElementChild);
}
function initfunction() {
  slides.style.width = (slideWidth + slideMargin) * (slideCount + 2) + 'px';
  slides.style.left = -(slideWidth + slideMargin) + 'px';
}
nextBtn.addEventListener('click', function () {
  //다음 버튼 눌렀을때
  if (currentIdx <= slideCount - 1) {
    //슬라이드이동
    slides.style.left = -(currentIdx + 2) * (slideWidth + slideMargin) + 'px';
    slides.style.transition = `${0.5}s ease-out`; //이동 속도
  }
  if (currentIdx === slideCount - 1) {
    //마지막 슬라이드 일때
    setTimeout(function () {
      //0.5초동안 복사한 첫번째 이미지에서, 진짜 첫번째 위치로 이동
      slides.style.left = -(slideWidth + slideMargin) + 'px';
      slides.style.transition = `${0}s ease-out`;
    }, 500);
    currentIdx = -1;
  }
  currentIdx += 1;
});
prevBtn.addEventListener('click', function () {
  //이전 버튼 눌렀을때
  console.log(currentIdx);
  if (currentIdx >= 0) {
    slides.style.left = -currentIdx * (slideWidth + slideMargin) + 'px';
    slides.style.transition = `${0.5}s ease-out`;
  }
  if (currentIdx === 0) {
    setTimeout(function () {
      slides.style.left = -slideCount * (slideWidth + slideMargin) + 'px';
      slides.style.transition = `${0}s ease-out`;
    }, 500);
    currentIdx = slideCount;
  }
  currentIdx -= 1;
});

</script>
</html>